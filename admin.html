<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Studio Merchan | Admin</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="style admin.css" />
  </head>
  <body>
    <div id="login-screen" class="login-container">
      <div class="card login-card shadow p-5">
        <h3 class="text-center mb-4 fw-bold" style="color: #003766">
          ADMIN LOGIN
        </h3>
        <input
          type="email"
          id="login-email"
          class="form-control mb-3"
          placeholder="Email"
        />
        <input
          type="password"
          id="login-password"
          class="form-control mb-3"
          placeholder="Password"
        />
        <button
          onclick="login()"
          class="btn btn-primary w-100 fw-bold"
          style="background-color: #c9761c; border: none"
        >
          ENTER STUDIO
        </button>
        <p id="login-error" class="text-danger text-center mt-3 small"></p>
      </div>
    </div>

    <div id="dashboard-screen" class="container-fluid g-0 hidden">
      <div class="row g-0">
        <div class="col-md-2 sidebar p-4 d-flex flex-column">
          <h4 class="mb-5 text-center fw-bold text-white">
            MERCHAN <span class="sidebar-brand">CMS</span>
          </h4>
          <div class="nav flex-column gap-2">
            <a
              class="nav-link"
              href="#"
              onclick="showSection('messages')"
              id="btn-messages"
            >
              <i class="bi bi-envelope-paper-fill me-2"></i> Messages
              <span
                id="unread-badge"
                class="badge bg-danger ms-auto"
                style="display: none"
                >0</span
              >
            </a>
            <a
              class="nav-link"
              href="#"
              onclick="showSection('clients')"
              id="btn-clients"
            >
              <i class="bi bi-people-fill me-2"></i> Clients
            </a>
            <a
              class="nav-link active"
              href="#"
              onclick="showSection('carousel')"
              id="btn-carousel"
            >
              <i class="bi bi-images me-2"></i> Carousel
            </a>
            <a
              class="nav-link"
              href="#"
              onclick="showSection('bookings')"
              id="btn-bookings"
            >
              <i class="bi bi-calendar-check me-2"></i> Bookings
            </a>
            <a
              class="nav-link"
              href="#"
              onclick="showSection('live')"
              id="btn-live"
            >
              <i class="bi bi-music-note-beamed me-2"></i> Live Events
            </a>
            <a
              class="nav-link"
              href="#"
              onclick="showSection('testimonials')"
              id="btn-testimonials"
            >
              <i class="bi bi-chat-quote me-2"></i> Testimonials
            </a>
            <a
              class="nav-link"
              href="#"
              onclick="showSection('remote')"
              id="btn-remote"
            >
              <i class="bi bi-cloud-download me-2"></i> Remote Projects
            </a>
          </div>
          <button
            onclick="logout()"
            class="btn btn-outline-light w-100 mt-auto"
          >
            <i class="bi bi-box-arrow-left me-2"></i> Log Out
          </button>
        </div>

        <div class="col-md-10 main-content">
          <div id="section-carousel">
            <h2 class="mb-4 fw-bold text-secondary">Manage Artist Carousel</h2>
            <div class="card shadow p-4" style="max-width: 900px">
              <div class="mb-4 p-3 bg-light border rounded">
                <label class="fw-bold mb-2 text-uppercase small text-muted"
                  >Select Slot</label
                >
                <select
                  id="slot-selector"
                  class="form-select form-select-lg"
                  onchange="loadSlotData()"
                >
                  <option value="1">Slot 1 (First Slide)</option>
                  <option value="2">Slot 2</option>
                  <option value="3">Slot 3</option>
                  <option value="4">Slot 4</option>
                  <option value="5">Slot 5 (Last Slide)</option>
                </select>
              </div>
              <div class="row g-3">
                <div class="col-md-6">
                  <label class="form-label fw-bold">Artist Name</label>
                  <input type="text" id="art-name" class="form-control" />
                </div>
                <div class="col-md-6">
                  <label class="form-label fw-bold">Artist Photo</label>
                  <input
                    type="file"
                    id="art-file"
                    class="form-control"
                    accept="image/*"
                  />
                  <input type="hidden" id="art-link" />
                  <div class="form-text text-muted small">
                    Upload replaces the current image.
                  </div>
                </div>
                <div class="col-12"><hr class="my-2 text-muted" /></div>
                <div class="col-md-4">
                  <label class="form-label small text-muted"
                    ><i class="bi bi-facebook"></i> Facebook</label
                  >
                  <input type="text" id="art-fb" class="form-control" />
                </div>
                <div class="col-md-4">
                  <label class="form-label small text-muted"
                    ><i class="bi bi-instagram"></i> Instagram</label
                  >
                  <input type="text" id="art-ig" class="form-control" />
                </div>
                <div class="col-md-4">
                  <label class="form-label small text-muted"
                    ><i class="bi bi-soundwave"></i> SoundCloud</label
                  >
                  <input type="text" id="art-sc" class="form-control" />
                </div>
              </div>
              <div class="mt-4 text-end">
                <button
                  onclick="saveSlot()"
                  class="btn btn-success px-5 fw-bold"
                  style="background-color: #c9761c; border: none"
                >
                  UPDATE SLOT
                </button>
              </div>
            </div>
          </div>

          <div id="section-bookings" class="hidden">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h2 class="fw-bold text-secondary">Studio Bookings</h2>
              <button
                onclick="fetchAdminBookings()"
                class="btn btn-outline-primary"
              >
                <i class="bi bi-arrow-clockwise me-2"></i> Refresh
              </button>
            </div>
            <div class="card shadow overflow-hidden">
              <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                  <thead style="background-color: #003766; color: white">
                    <tr>
                      <th class="ps-4 py-3">Status</th>
                      <th class="py-3">Dates</th>
                      <th class="py-3">Details</th>
                      <th class="py-3">Client</th>
                      <th class="text-end pe-4 py-3">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="bookings-table-body" class="bg-white"></tbody>
                </table>
              </div>
            </div>
          </div>

          <div id="section-live" class="hidden">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h2 class="fw-bold text-secondary">Live Sound Bookings</h2>
              <button
                onclick="fetchLiveBookings()"
                class="btn btn-outline-primary"
              >
                <i class="bi bi-arrow-clockwise me-2"></i> Refresh
              </button>
            </div>
            <div class="card shadow overflow-hidden">
              <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                  <thead style="background-color: #c8761d; color: white">
                    <tr>
                      <th class="ps-4 py-3">Status</th>
                      <th class="py-3">Event Date</th>
                      <th class="py-3">Event Details</th>
                      <th class="py-3">Location</th>
                      <th class="py-3">Client</th>
                      <th class="text-end pe-4 py-3">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="live-table-body" class="bg-white"></tbody>
                </table>
              </div>
            </div>
          </div>

          <div id="section-clients" class="hidden">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h2 class="fw-bold text-secondary">Registered Clients</h2>
              <button onclick="fetchClients()" class="btn btn-outline-primary">
                <i class="bi bi-arrow-clockwise me-2"></i> Refresh List
              </button>
            </div>

            <div class="card shadow overflow-hidden">
              <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                  <thead style="background-color: #003766; color: white">
                    <tr>
                      <th class="ps-4 py-3">User Identity</th>
                      <th class="py-3">Contact Info</th>
                      <th class="py-3">Role</th>
                      <th class="py-3">Activity Stats</th>
                      <th class="text-end pe-4 py-3">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="clients-table-body" class="bg-white">
                    <tr>
                      <td colspan="5" class="text-center p-5 text-muted">
                        Loading clients...
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div id="section-messages" class="hidden">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h2 class="fw-bold text-secondary">Inbox</h2>
              <button onclick="fetchMessages()" class="btn btn-outline-primary">
                <i class="bi bi-arrow-clockwise me-2"></i> Refresh
              </button>
            </div>

            <div class="card shadow overflow-hidden">
              <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                  <thead style="background-color: #003766; color: white">
                    <tr>
                      <th class="ps-4 py-3">Status</th>
                      <th class="py-3">From</th>
                      <th class="py-3">Subject</th>
                      <th class="py-3">Date</th>
                      <th class="text-end pe-4 py-3">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="messages-table-body" class="bg-white">
                    <tr>
                      <td colspan="5" class="text-center p-5 text-muted">
                        Loading messages...
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div id="section-testimonials" class="hidden">
            <h2 class="mb-4 fw-bold text-secondary">Manage Testimonials</h2>

            <div class="row">
              <div class="col-lg-4 mb-4">
                <div class="card shadow p-4">
                  <h5 class="fw-bold mb-3" id="testi-form-title">
                    Add New Review
                  </h5>
                  <input type="hidden" id="testi-id" />
                  <div class="mb-3">
                    <label class="form-label fw-bold">Client Name</label>
                    <input
                      type="text"
                      id="testi-name"
                      class="form-control"
                      placeholder="e.g. John Doe"
                    />
                  </div>

                  <div class="mb-3">
                    <label class="form-label fw-bold">Role / Title</label>
                    <input
                      type="text"
                      id="testi-role"
                      class="form-control"
                      placeholder="e.g. Producer"
                    />
                  </div>

                  <div class="mb-3">
                    <label class="form-label fw-bold">Quote</label>
                    <textarea
                      id="testi-quote"
                      class="form-control"
                      rows="4"
                      placeholder="Best studio ever..."
                    ></textarea>
                  </div>

                  <div class="mb-3">
                    <label class="form-label fw-bold">Client Photo</label>
                    <input
                      type="file"
                      id="testi-file"
                      class="form-control"
                      accept="image/*"
                    />
                    <input type="hidden" id="testi-img-url" />
                    <div class="form-text text-muted small">
                      Upload a JPG or PNG.
                    </div>
                  </div>

                  <div class="d-grid gap-2">
                    <button
                      onclick="saveTestimonial()"
                      class="btn btn-primary fw-bold"
                      style="background-color: #003766; border: none"
                    >
                      SAVE REVIEW
                    </button>
                    <button
                      onclick="resetTestiForm()"
                      class="btn btn-outline-secondary btn-sm"
                    >
                      Clear Form
                    </button>
                  </div>
                </div>
              </div>

              <div class="col-lg-8">
                <div class="card shadow overflow-hidden">
                  <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                      <thead style="background-color: #003766; color: white">
                        <tr>
                          <th class="ps-4 py-3">Client</th>
                          <th class="py-3">Quote</th>
                          <th class="text-end pe-4 py-3">Actions</th>
                        </tr>
                      </thead>
                      <tbody
                        id="testimonials-table-body"
                        class="bg-white"
                      ></tbody>
                    </table>
                  </div>
                </div>
              </div>

              <div id="section-messages" class="hidden">
                <div
                  class="d-flex justify-content-between align-items-center mb-4"
                >
                  <h2 class="fw-bold text-secondary">Inbox</h2>
                  <button
                    onclick="fetchMessages()"
                    class="btn btn-outline-primary"
                  >
                    <i class="bi bi-arrow-clockwise me-2"></i> Refresh
                  </button>
                </div>

                <div class="card shadow overflow-hidden">
                  <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                      <thead style="background-color: #003766; color: white">
                        <tr>
                          <th class="ps-4 py-3">Status</th>
                          <th class="py-3">From</th>
                          <th class="py-3">Subject</th>
                          <th class="py-3">Date</th>
                          <th class="text-end pe-4 py-3">Actions</th>
                        </tr>
                      </thead>
                      <tbody id="messages-table-body" class="bg-white">
                        <tr>
                          <td colspan="5" class="text-center p-5 text-muted">
                            Loading messages...
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="section-remote" class="hidden">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <h2 class="fw-bold text-secondary">Remote Project Requests</h2>
              <button
                onclick="fetchRemoteProjects()"
                class="btn btn-outline-primary"
              >
                <i class="bi bi-arrow-clockwise me-2"></i> Refresh
              </button>
            </div>

            <div class="card shadow overflow-hidden">
              <div class="table-responsive">
                <table class="table table-hover mb-0 align-middle">
                  <thead style="background-color: #003766; color: white">
                    <tr>
                      <th class="ps-4 py-3">Status</th>
                      <th class="py-3">Project Details</th>
                      <th class="py-3">Client Info</th>
                      <th class="py-3">Files & Revisions</th>
                      <th class="text-end pe-4 py-3">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="remote-table-body" class="bg-white"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="revisionModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div
            class="modal-header"
            style="background-color: #003766; color: white"
          >
            <h5 class="modal-title">Upload Revision / Deliverable</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="rev-project-id" />
            <div class="mb-3">
              <label class="form-label fw-bold">Version Name</label>
              <input
                type="text"
                id="rev-name"
                class="form-control"
                placeholder="e.g. Mix V1, Master Final"
              />
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold">Audio File (MP3/WAV)</label>
              <input type="file" id="rev-file" class="form-control" required />
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold">Notes (Optional)</label>
              <textarea
                id="rev-notes"
                class="form-control"
                rows="2"
                placeholder="Check out the new snare sound..."
              ></textarea>
            </div>

            <button
              onclick="saveRevision()"
              class="btn btn-success w-100 fw-bold"
              id="btn-save-rev"
            >
              <i class="bi bi-send me-2"></i> SEND TO CLIENT
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="userHistoryModal"
      tabindex="-1"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div
            class="modal-header"
            style="background-color: #003766; color: white"
          >
            <div>
              <h5 class="modal-title fw-bold" id="history-modal-title">
                User History
              </h5>
              <div class="small opacity-75" id="history-modal-subtitle">
                Start Date: -
              </div>
            </div>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>

          <div class="modal-body p-0">
            <ul
              class="nav nav-tabs nav-fill bg-light"
              id="historyTab"
              role="tablist"
            >
              <li class="nav-item">
                <button
                  class="nav-link active"
                  data-bs-toggle="tab"
                  data-bs-target="#hist-studio"
                  type="button"
                >
                  Studio Bookings
                </button>
              </li>
              <li class="nav-item">
                <button
                  class="nav-link"
                  data-bs-toggle="tab"
                  data-bs-target="#hist-live"
                  type="button"
                >
                  Live Events
                </button>
              </li>
              <li class="nav-item">
                <button
                  class="nav-link"
                  data-bs-toggle="tab"
                  data-bs-target="#hist-remote"
                  type="button"
                >
                  Remote Projects
                </button>
              </li>
            </ul>

            <div
              class="tab-content p-4"
              style="min-height: 300px; max-height: 60vh; overflow-y: auto"
            >
              <div class="tab-pane fade show active" id="hist-studio">
                <table class="table table-sm table-bordered">
                  <thead class="table-light">
                    <tr>
                      <th>Date</th>
                      <th>Service</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody id="hist-studio-body"></tbody>
                </table>
              </div>

              <div class="tab-pane fade" id="hist-live">
                <table class="table table-sm table-bordered">
                  <thead class="table-light">
                    <tr>
                      <th>Date</th>
                      <th>Type</th>
                      <th>Location</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody id="hist-live-body"></tbody>
                </table>
              </div>

              <div class="tab-pane fade" id="hist-remote">
                <table class="table table-sm table-bordered">
                  <thead class="table-light">
                    <tr>
                      <th>Project</th>
                      <th>Service</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody id="hist-remote-body"></tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="modal-footer bg-light">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="readMessageModal"
      tabindex="-1"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div
            class="modal-header"
            style="background-color: #003766; color: white"
          >
            <h5 class="modal-title fw-bold">Message Details</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body p-4">
            <div class="d-flex justify-content-between mb-3">
              <div>
                <h5 class="fw-bold mb-0" id="msg-sender">Name</h5>
                <div class="text-muted small" id="msg-email">
                  email@example.com
                </div>
              </div>
              <div class="text-end">
                <span class="badge bg-secondary" id="msg-date"
                  >Oct 24, 2025</span
                >
              </div>
            </div>

            <div class="mb-3">
              <label class="fw-bold small text-muted text-uppercase"
                >Subject</label
              >
              <div class="fw-bold" id="msg-subject" style="color: #c9761c">
                Inquiry
              </div>
            </div>

            <div class="p-3 bg-light rounded border">
              <p class="mb-0" id="msg-body" style="white-space: pre-wrap">
                Message content...
              </p>
            </div>
          </div>
          <div class="modal-footer">
            <a href="#" id="btn-reply" class="btn btn-primary" target="_blank">
              <i class="bi bi-reply-fill me-2"></i> Reply via Email
            </a>
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="admin.js"></script>
  </body>
</html>
